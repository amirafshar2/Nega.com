@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@


@model List<BE.Comment>

<div class="sidebar-item comments">
    <div class="sidebar-heading">
        <h2>@Model.Count() کامنت</h2>
    </div>
    <div class="col-lg-12">
        <ul>
            @foreach (var item in Model)
            {
                <li style="width:100%;">
                    <div class="col-lg-12" style="float:inline-start">
                        <div class="row">
                            <div class="col-lg-2">
                                <div class="author-thumb">
                                    <img src="~/image/Pack/@item.user.Picture" alt="">
                                </div>
                            </div>
                            <div class="col-lg-10">
                                <div class="right-content">
                                    @{
                                        TimeSpan timeSince = DateTime.Now - item.Date;
                                        string formattedTime = FormatTimeSpan(timeSince);
                                    }
                                    <h4>@item.user.Name  <span><small> @formattedTime </small></span></h4>
                                    <p>@item.Content</p>
                                </div>
                            </div>
                        </div>
                    </div>


                </li>

                @* <li class="replied">
            <div class="author-thumb">
            <img src="~/551/assets/images/comment-author-02.jpg" alt="">
            </div>
            <div class="right-content">
            <h4>Thirteen Man<span>May 20, 2020</span></h4>
            <p>In porta urna sed venenatis sollicitudin. Praesent urna sem, pulvinar vel mattis eget.</p>
            </div>
            </li>
            <a href="#" id="toggle-comments">...</a> *@
                @* $(document).ready(function() {
            $("#toggle-comments").click(function() {
            $("#comments ul").slideToggle("slow");
            });
            });*@
            }

        </ul>
    </div>
</div>
<script>
    @functions {
        string FormatTimeSpan(TimeSpan timeSpan)
        {
            if (timeSpan.TotalSeconds < 60)
            {
                return "چند ثانیه قبل";
            }
            else if (timeSpan.TotalMinutes < 60)
            {
                return $"{(int)timeSpan.TotalMinutes} دقیقه قبل";
            }
            else if (timeSpan.TotalHours < 24)
            {
                return $"{(int)timeSpan.TotalHours} ساعت قبل";
            }
            else if (timeSpan.TotalDays < 7)
            {
                return $"{(int)timeSpan.TotalDays} روز قبل";
            }
            else
            {
                int weeks = (int)(timeSpan.TotalDays / 7);
                return $"{weeks} هفته قبل";
            }
        }
    }
</script>